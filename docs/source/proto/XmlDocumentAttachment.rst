XmlDocumentAttachment
=====================

.. code-block:: protobuf

    message XmlDocumentAttachment {
        required SignedContent SignedContent = 1;
        optional string Comment = 3;
        repeated DocumentId InitialDocumentIds = 4;
        repeated DocumentId SubordinateDocumentIds = 5;
        optional string CustomDocumentId = 6;
        optional bool NeedReceipt = 7 [default = false];
        repeated CustomDataItem CustomData = 8;
    }
        

Структура данных *XmlDocumentAttachment* представляет в отправляемом сообщении :doc:`MessageToPost` счет-фактуру (СФ), исправление счета-фактуры (ИСФ), корректировочный счет-фактуру (КСФ), исправление корректировочного счета-фактуры (ИКСФ), титул продавца для товарной накладной ТОРГ-12 в XML-формате, или титул исполнителя для акта о выполнении работ (оказании услуг) в XML-формате:

-  *SignedContent* - содержимое файла СФ/ИСФ/КСФ/ИКСФ/накладной/акта вместе с ЭП под ним в виде структуры :doc:`SignedContent`.

-  *Comment* - необязательный текстовый комментарий к СФ/ИСФ/КСФ/ИКСФ/накладной/акта.

-  *InitialDocumentIds* - список идентификаторов документов, к которым привязывается отправляемый СФ/ИСФ/КСФ/ИКСФ/накладная/акт; каждый такой идентификатор задается структурой :doc:`DocumentId`.

    -  Для того чтобы установить связь с документом внутри отправляемого сообщения, нужно в поле *DocumentId.MessageId* указать пустую строку, а в поле *DocumentId.EntityId* поместить значение поля *CustomDocumentId* соответствующего документа.
	
    -  Если в систему ранее был загружен СФ/ИСФ/КСФ, на него можно сослаться при помощи *InitialDocumentIds*.
	
    -  В случае отсутствия в системе исходного документа, *InitialDocumentIds* можно не заполнять. При отправке ИСФ он может ссылаться на документ типа *Attachment/Invoice* (СФ).
	
    -  При отправке КСФ он может ссылаться на документ типа *Attachment/Invoice* (СФ), либо на документ типа *Attachment/InvoiceRevision* (ИСФ). При	отправке ИКСФ он может ссылаться на документ типа *Attachment/InvoiceCorrection* (КСФ).

-  *SubordinateDocumentIds* - список идентификаторов документов, которые должны ссылаться на отправляемый СФ/ИСФ/КСФ/ИКСФ/накладной/акта; каждый такой идентификатор задается структурой :doc:`DocumentId`. Для того чтобы установить связь с документом внутри отправляемого сообщения, нужно в поле DocumentId.MessageId указать пустую строку, а в поле *DocumentId.EntityId* поместить значение поля *CustomDocumentId* соответствующего документа.

-  *CustomDocumentId* - необязательный идентификатор документа во внешней системе, уникальный в рамках структуры :doc:`MessageToPost`; используется для выстраивания связей между документами внутри отправляемого сообщения. В дальнейшем его можно получить через *Document.CustomDocumentId*.

-  *NeedReceipt* - необязательный признак того, что от получателя требуется сформировать извещение о получении данного документа.

-  *CustomData* - список пар вида "ключ-значение", содержащих произвольные данные по документу. Каждая пара задается структурой :doc:`CustomDataItem`.