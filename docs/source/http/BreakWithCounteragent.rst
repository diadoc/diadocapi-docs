BreakWithCounteragent
=====================

Имя ресурса: **/BreakWithCounteragent**

HTTP метод: **POST**

Параметры строки запроса:

-  *myOrgId*: идентификатор организации, от имени которой производится разрыв отношения партнерства;

-  *counteragentOrgId*: идентификатор организации-контрагента;

-  *comment*: текст комментария к операции (может отсутствовать, но не должен превышать 5000 символов).

В запросе должен присутствовать HTTP-заголовок ``Authorization`` с необходимыми данными для :doc:`авторизации <../Authorization>`. Пользователь имеет право производить манипуляции со списком контрагентов организации myOrgId или запрашивать его, если у него есть доступ хотя бы в один из ящиков этой организации.

Метод позволяет разорвать действующее отношение партнерства между организациями *myOrgId* и *counteragentOrgId*, а также отозвать или отклонить приглашение к установлению партнерских отношений. 

Алгоритм выполнения запроса:

-  Если между организациями *myOrgId* и *counteragentOrgId* есть действующее отношение партнерства (то есть контрагент *counteragentOrgId* находится в статусе *IsMyCounteragent*), оно разрывается. Контрагент *counteragentOrgId* переходит в статус *IsRejectedByMe*.

-  Если в индексе отношений есть входящий запрос на установление отношения партнерства от организации *counteragentOrgId* к организации *myOrgId* (то есть контрагент *counteragentOrgId* находится в статусе *InvitesMe*), то этот запрос отклоняется. Контрагент *counteragentOrgId* переходит в статус *IsRejectedByMe*.

-  Если в индексе отношений есть исходящий запрос от организации *myOrgId* к организации *counteragentOrgId*, то выполняется отзыв этого запроса. Статус контрагента *counteragentOrgId* меняется на предыдущий статус, который был у него до отправки этого запроса.

-  Если партнерских отношений между организациями *myOrgId* и *counteragentOrgId* еще не было, или партнерское отношение между организациями *myOrgId* и *counteragentOrgId* уже разорвано, то ничего не происходит.

Возможные HTTP-коды возврата:

-  200 (OK) - операция успешно завершена;

-  400 (Bad Request) - данные в запросе имеют неверный формат или отсутствуют обязательные параметры;

-  401 (Unauthorized) - в запросе отсутствует HTTP-заголовок ``Authorization``, или в этом заголовке содержатся некорректные авторизационные данные;

-  403 (Forbidden) - может возвращаться в следующих случаях:

    - доступ к списку контрагентов организации *myOrgId* с предоставленным авторизационным токеном запрещен;

    - у пользователя нет права работать со списками контрагентов (см. :doc:`OrganizationUserPermissions.CanManageCounteragents <../proto/OrganizationUserPermissions>`);

-  405 (Method not allowed) - используется неподходящий HTTP-метод;

-  500 (Internal server error) - при обработке запроса возникла непредвиденная ошибка.
