GetDocument
===========

Имя ресурса: **/V3/GetDocument**

HTTP метод: **GET**

Параметры строки запроса:

-  *boxId*: идентификатор ящика;

-  *messageId*: идентификатор сообщения, содержащего искомый документ;

-  *entityId*: идентификатор сущности типа LetterAttachment внутри сообщения messageId, представляющей искомый документ;

-  *injectEntityContent*: параметр, указывающий следует ли возвращать содержимое документа. Если передано значение true, то содержимое документа будет добавлено в Content.Data. Если параметр не передан, будет установлено значение по умолчанию true.
В запросе должен присутствовать HTTP-заголовок ``Authorization`` с необходимыми данными для :doc:`авторизации <../Authorization>`. Для вызова этого метода текущий пользователь должен иметь доступ к запрашиваемому документу, в противном случае возвращается код ошибки 403 (Forbidden).

В теле ответа содержится информация о документе с идентификатором entityId из сообщения с идентификатором messageId в ящике boxId. Эта информация выдается в виде сериализованной структуры данных :doc:`../proto/Document`. Содержимое документа можно прочитать из поля Document.Content (см. описание структуры :doc:`../proto/Content`). Формат содержимого зависит от типа документа (см. описание возможных форматов в статье о структуре :doc:`Entity <../proto/Entity message>`). Если размер содержимого документа превышает 1 048 576 байт, вне зависимости от значения параметра *injectEntityContent* содержимое не будет добавлено к ответу. Содержимое документа всегда можно получить при помощи метода :doc:`GetEntityContent`.

Возможные HTTP-коды возврата:

-  200 (OK) - операция успешно завершена;

-  400 (Bad Request) - данные в запросе имеют неверный формат или отсутствуют обязательные параметры;

-  401 (Unauthorized) - в запросе отсутствует HTTP-заголовок ``Authorization``, или в этом заголовке содержатся некорректные авторизационные данные;

-  403 (Forbidden) - доступ к ящику с предоставленным авторизационным токеном запрещен;

-  404 (Not Found) - в указанном ящике нет сообщения с идентификатором messageId, либо в указанном сообщении нет сущности типа LetterAttachment с идентификатором entityId;

-  405 (Method not allowed) - используется неподходящий HTTP-метод;

-  500 (Internal server error) - при обработке запроса возникла непредвиденная ошибка.
