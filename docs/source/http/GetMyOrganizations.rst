GetMyOrganizations
==================

Имя ресурса: **/GetMyOrganizations**

HTTP метод: **GET**

Параметры строки запроса:

-  *autoRegister*: признак, указывающий на то, нужно ли регистрировать текущего пользователя в организацию из сертификата, если в организации нет действующего администратора и активных пользователей (по умолчанию, true).

В запросе должен присутствовать HTTP-заголовок ``Authorization`` с необходимыми данными для :doc:`авторизации <../Authorization>`.

В теле ответа содержится список всех ящиков, к которым имеет доступ пользователь-владелец авторизационного токена, в виде структуры :doc:`OrganizationList <../proto/Organization>`.

Если текущий пользователь имеет сертификат КЭП, при запросе данного метода произойдет регистрация новой организации из сертификата (если ранее такая организация отсутствовала). Информация о такой организации вернется в ответ на запрос вместе с организациями, в которые пользователь уже имеет доступ. По умолчанию, метод зарегистрирует текущего пользователя в организации и сделает его администратором (если в организации нет действующего администратора и активных пользователей). Для того, чтобы избежать авторегистрации пользователей, необходимо передавать флаг ``autoRegister = false``. Флаг вызывает только регистрацию организации, без регистрации в ней пользователя.

Если организация в Диадоке уже существует, то метод с флагом ``autoRegister = false`` вернет организацию из сертификата, без повторной регистрации.

Если у данного пользователя нет сертификата (логинный пользователь). В ответ на вызов метода будет получен список организаций, в которые у пользователя есть доступ.

Возможные HTTP-коды возврата:

-  200 (OK) - операция успешно завершена;

-  401 (Unauthorized) - в запросе отсутствует HTTP-заголовок ``Authorization``, или в этом заголовке содержатся некорректные авторизационные данные;

-  405 (Method not allowed) - используется неподходящий HTTP-метод;

-  500 (Internal server error) - при обработке запроса возникла непредвиденная ошибка.
