GenerateTorg12XmlForBuyer
=========================

.. warning:: Этот метод — устаревший. С 1 октября 2021 года он перестанет работать. Для генерации документов следует использовать метод :doc:`../http/GenerateTitleXml`.

.. http:post:: /GenerateTorg12XmlForBuyer

    :query documentVersion: версия документа
    :query boxId: идентификатор ящика
    :query sellerTitleMessageId: идентификатор сообщения, содержащего соответствующий титул продавца
    :query sellerTitleAttachmentId: идентификатор сущности, представляющей титул продавца, для которого требуется изготовить титул заказчика

    :reqheader Authorization: необходимые данными для :doc:`авторизации <../Authorization>`

    :statuscode 200: операция успешно завершена
    :statuscode 400: данные в запросе имеют неверный формат или отсутствуют обязательные параметры
    :statuscode 401: в запросе отсутствует HTTP-заголовок ``Authorization``, или в этом заголовке содержатся некорректные авторизационные данные
    :statuscode 403: доступ к ящику с предоставленным авторизационным токеном запрещен
    :statuscode 404: при заполненном поле DiadocOrganizationInfo.BoxId в справочнике Диадока отсутствует организация, которой принадлежит указанный ящик
    :statuscode 405: используется неподходящий HTTP-метод
    :statuscode 409: не удалось разобрать соответствующий титул продавца
    :statuscode 500: при обработке запроса возникла непредвиденная ошибка

    Для вызова этого метода текущий пользователь должен иметь доступ к документу титула продавца, в противном случае возвращается код ошибки 403 (Forbidden).

    Если *documentVersion* равен ``tovtorg_05_01_04``:

    - в теле запроса должны содержаться данные для изготовления титула покупателя для товарной накладной в XML-формате, в виде сериализованной структуры :doc:`TovTorgBuyerTitleInfo <../proto/TovTorgInfo>`;

    - в теле ответа содержится XML-файл титула покупателя для товарной накладной, построенный на основании данных из запроса. Файл изготавливается в соответствии с :download:`XSD-схемой (DP_TOVTORGPOK_1_992_02_05_01_04.xsd) <../xsd/DP_TOVTORGPOK_1_992_02_05_01_04.xsd>`, которая описывает рекомендованный ФНС формат для электронных товарных накладных;

    Если *documentVersion* не указан или равен ``torg12_05_01_02``:

    - в теле запроса должны содержаться данные для изготовления титула покупателя для товарной накладной в XML-формате, в виде сериализованной структуры :doc:`Torg12BuyerTitleInfo <../proto/Torg12Info>`;

    - в теле ответа содержится XML-файл титула покупателя для товарной накладной, построенный на основании данных из запроса. Файл изготавливается в соответствии с :download:`XSD-схемой (DP_PTORG12_1_989_00_05_01_02.xsd) <../xsd/DP_PTORG12_1_989_00_05_01_02.xsd>`, которая описывает рекомендованный ФНС формат для электронных товарных накладных;

    Имя файла титула покупателя для товарной накладной возвращается в стандартном HTTP-заголовке Content-Disposition;
