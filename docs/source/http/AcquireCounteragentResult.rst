AcquireCounteragentResult
=========================

Метод ``AcquireCounteragentResult`` возвращает идентификатор приглашенной организации.

.. http:get:: /AcquireCounteragentResult

	:queryparam taskId: идентификатор операции, полученный методом :doc:`AcquireCounteragent`.

	:requestheader Authorization: данные, необходимые для :doc:`авторизации <../Authorization>`.

	:statuscode 200: операция успешно завершена.
	:statuscode 204: операция еще не завершена. В HTTP-заголовке ответа ``Retry-After`` указано время в секундах, через которое нужно повторить запрос.
	:statuscode 400: данные в запросе имеют неверный формат или отсутствуют обязательные параметры.
	:statuscode 401: в запросе отсутствует HTTP-заголовок ``Authorization`` или в этом заголовке содержатся некорректные авторизационные данные.
	:statuscode 403: доступ к ящику с предоставленным авторизационным токеном запрещен или у пользователя недостаточно прав для доступа ко всем документам организации.
	:statuscode 404: в указанном ящике нет документов с указанными идентификаторами.
	:statuscode 405: используется неподходящий HTTP-метод.
	:statuscode 409: не удалось выполнить запрос на приглашение контрагента.
	:statuscode 500: при обработке запроса возникла непредвиденная ошибка.

	:responseheader Retry-After: если в ответе содержится HTTP-заголовок ``Retry-After``, то предыдущий вызов этого метода с таким же идентификатором операции еще не завершен. В этом случае следует повторить вызов через указанное в заголовке время (в секундах), чтобы убедиться, что операция завершилась без ошибок.
	
	:response Body: Тело ответа содержит результат выполнения операции, представленный структурой ``AcquireCounteragentResult``:

		.. code-block:: protobuf

			message AcquireCounteragentResult {
			    required string OrgId = 1;
			    optional DocumentId InvitationDocumentId = 2;
			}

		..

		- ``orgId`` — идентификатор приглашенной организации.
		- ``InvitationDocumentId`` — ссылка на документ, отправленный вместе с приглашением, представленная структурой :doc:`../proto/DocumentId`. Заполняется независимо от наличия доступа к документу.

Если отправить приглашение контрагенту не удалось, то метод вернет ошибку ``409 (Conflict)``. Возможные причины ошибки:

- не удалось создать организацию, если приглашение отправлялось в незарегистрированную организацию,
- не удалось проверить подпись, если приглашение отправлялось с вложенным файлом.