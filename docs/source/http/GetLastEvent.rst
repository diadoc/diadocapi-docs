GetLastEvent
============

Метод ``GetLastEvent`` возвращает последнее событие в ящике.

.. http:get:: /GetLastEvent

	:queryparam boxId: идентификатор :doc:`ящика <../entities/box>` организации.

	:requestheader Authorization: данные, необходимые для :doc:`авторизации <../Authorization>`.

	:statuscode 200: операция успешно завершена.
	:statuscode 204: в ящике нет событий.
	:statuscode 400: данные в запросе имеют неверный формат или отсутствуют обязательные параметры.
	:statuscode 401: в запросе отсутствует HTTP-заголовок ``Authorization`` или в этом заголовке содержатся некорректные авторизационные данные.
	:statuscode 402: у организации с указанным идентификатором ``boxId`` отсутствует или закончилась подписка на API.
	:statuscode 403: доступ к ящику с предоставленным авторизационным токеном запрещен.
	:statuscode 405: используется неподходящий HTTP-метод.
	:statuscode 500: при обработке запроса возникла непредвиденная ошибка.

	:response Body: Тело ответа содержит последнее событие в ящике, представленное структурой :doc:`../proto/BoxEvent`.

Лента событий формируется по подразделению организации, в котором состоит пользователь. Подразделение указано в поле ``UserDepartmentId`` структуры :doc:`../proto/OrganizationUserPermissions`.

.. important::
	К подразделению организации привязываются все события, произошедшие с 15.03.2017. События, произошедшие до этой даты, может получить только пользователь, который имеет доступ ко всем документам организации.

Если у пользователя есть доступ ко всем документам организации, в ленту попадут события по всему ящику. Доступ пользователя указан в поле ``AllDocuments`` структуры :doc:`../proto/DocumentAccessLevel`.

События по черновикам доступны пользователям, у которых есть доступ ко всем документам организации, так как черновики не имеют привязки к подразделению.

Метод возвращает только информацию об изменениях в ящике, содержимое документов в ответе не возвращается. Это гарантирует, что ответ на запрос будет иметь небольшой размер.

----

.. rubric:: См. также

*Другие методы для работы с событиями:*
	- :doc:`GetNewEvents` — возвращает ленту событий в ящике
	- :doc:`GetEvent` — возвращает информацию о конкретном событии
	- :doc:`GetForwardedDocumentEvents` — возвращает список событий пересылки документов в ящик