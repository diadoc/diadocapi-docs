SendDraft
=========

Метод ``SendDraft`` отправляет сообщение, созданное из :doc:`черновика <../entities/draft>`.

.. http:post:: /SendDraft

	:queryparam operationId: уникальный идентификатор операции. Необязательный параметр. По умолчанию имеет значение MD5-хэша тела запроса.

	:requestheader Authorization: данные, необходимые для :doc:`авторизации <../Authorization>`.

	:request Body: Тело запроса должно содержать информацию для отправки сообщения на основе черновика, представленную структурой :doc:`../proto/DraftToSend`.

	:statuscode 200: операция успешно завершена.
	:statuscode 400: данные в запросе имеют неверный формат или отсутствуют обязательные параметры.
	:statuscode 401: в запросе отсутствует HTTP-заголовок ``Authorization`` или в этом заголовке содержатся некорректные авторизационные данные.
	:statuscode 402: у организации с указанным идентификатором ``boxId`` закончилась подписка на API.
	:statuscode 403: доступ к ящику с предоставленным авторизационным токеном запрещен.
	:statuscode 405: используется неподходящий HTTP-метод.
	:statuscode 409: осуществляется попытка отправить дубликат сообщения, указан несуществующий идентификатор содержимого документа, :doc:`подготовленного к отправке <PrepareDocumentsToSign>`, или запрещен прием документов от контрагентов согласно свойству ``Sociability`` в структуре :doc:`../proto/Organization`.
	:statuscode 500: при обработке запроса возникла непредвиденная ошибка.

	:responseheader Retry-After: если в ответе содержится HTTP-заголовок ``Retry-After``, то предыдущий вызов этого метода с таким же идентификатором операции еще не завершен. В этом случае следует повторить вызов через указанное в заголовке время (в секундах), чтобы убедиться, что операция завершилась без ошибок.

	:response Body: Тело ответа содержит отправленное сообщение, представленное структурой :doc:`../proto/Message`.

Если вызов метода с указанным идентификатором операции завершился успешно, то все последующие вызовы с этим идентификатором завершатся успешно. Результат всех последующих вызовов будет равен результату первого успешного вызова.

----

.. rubric:: См. также

*Определение:*
	- :doc:`../entities/draft`

.. include:: ../include/seealso_method_draft.txt