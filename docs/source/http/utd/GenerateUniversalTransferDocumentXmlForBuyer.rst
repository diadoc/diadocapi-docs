GenerateUniversalTransferDocumentXmlForBuyer
=============================================

.. warning:: Этот метод устарел и не работает с 1 октября 2021 года. Для генерации документов используйте метод :doc:`../GenerateTitleXml`.

Имя ресурса: **/GenerateUniversalTransferDocumentXmlForBuyer**

HTTP метод: **POST**

Параметры строки запроса:

-  *boxId*: идентификатор ящика;

-  *sellerTitleMessageId*: идентификатор сообщения, содержащего соответствующий титул продавца;

-  *sellerTitleAttachmentId*: идентификатор сущности, представляющей титул продавца, для которого требуется изготовить титул покупателя;

В запросе должен присутствовать HTTP-заголовок ``Authorization`` с необходимыми данными для :doc:`авторизации <../../Authorization>`.

В теле запроса должны содержаться данные для изготовления документов в формате УПД или УКД, в виде сериализованной структуры :doc:`../../proto/utd/UniversalTransferDocumentBuyerTitleInfo`.

В теле ответа содержится XML-файл, построенный на основании данных из запроса.

Если структура :doc:`../../proto/utd/UniversalTransferDocumentBuyerTitleInfo` заполнена для формата УПД:

-  файл изготавливается в соответствии со схемой второго титула формата УПД с той же версией, что и у первого титула,

Если структура :doc:`../../proto/utd/UniversalTransferDocumentBuyerTitleInfo` заполнена для формата УКД:

-  файл изготавливается в соответствии со схемой второго титула формата УКД с той же версией, что и у первого титула,

Возможные HTTP-коды возврата:

-  200 (OK) - операция успешно завершена;

-  400 (Bad Request) - данные в запросе имеют неверный формат или отсутствуют обязательные параметры;

-  401 (Unauthorized) - в запросе отсутствует HTTP-заголовок ``Authorization``, или в этом заголовке содержатся некорректные авторизационные данные;

-  403 (Forbidden) - доступ к ящику с предоставленным авторизационным токеном запрещен, либо у пользователя нет доступа к запрашиваемому
   документу;

-  404 (Not Found) - в указанном ящике нет сообщения с идентификатором *messageId*, либо в указанном сообщении нет сущности с идентификатором *documentId*;

-  405 (Method not allowed) - используется неподходящий HTTP-метод;

-  409 (Conflict) - формирование архива для данного документа невозможно; в теле ответа будет содержаться следующее сообщение:
   ``Generating print form for this type of document is not supported``;

-  500 (Internal server error) - при обработке запроса возникла непредвиденная ошибка.
