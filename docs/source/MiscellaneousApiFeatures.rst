Дополнительные функции API
==========================

Ниже дан краткий обзор функций API, не упомянутых в предыдущих разделах. Более полную информацию по всем методам и структурам данных Diadoc API можно найти в технической документации.

Отправка заявления участника ЭДО
--------------------------------

При помощи метода :doc:`http/SendFnsRegistrationMessage` можно отправить заявление участника ЭДО.

Поиск контрагентов
------------------

Метод :doc:`http/GetOrganizationsByInnKpp` позволяет искать в Диадоке ящики по ИНН и КПП организаций, которым они принадлежат.

Метод *GetOrganizationsByInnKpp* возвращает список организаций и ящиков, удовлетворяющих критерию поиска, в виде структуры данных :doc:`OrganizationList <proto/Organization>`.

При помощи метода :doc:`http/GetBox` можно по идентификатору ящика получить информацию об организации, которой он принадлежит.

При помощи метода :doc:`http/GetOrganization` можно по идентификатору организациии узнать различные справочные данные, заведенные в Диадок, такие как ИНН, КПП, название, а также получить список ее ящиков.

Черновики
---------

Диадок позволяет клиенту API помещать в «свой» ящик еще не подписанные документы без их немедленной отправки контрагентам.

Это может быть полезно, когда подготовкой документов занимается один человек, а правом подписи и отправки обладает другой. Такие документы называются черновиками. Для их создания через API используется метод :doc:`http/PostMessage`.

Подготовка печатных форм
------------------------

Для документов, передаваемых через Диадок, в формализованном не человекочитаемом виде, предусмотрена возможность получения их печатных форм.

В первую очередь, этот функционал предназначен для формирования печатных форм счетов фактур и всех служебных документов, предусмотренных порядком Минфина в ходе документооборота счетов-фактур. Печатные формы интересующих пользователя документов можно получить через API при помощи метода :doc:`http/GeneratePrintForm`.

Распознавание печатных форм счетов-фактур
-----------------------------------------

Диадок умеет распознавать печатные формы счетов-фактур, подготовленные практически в любой бухгалтерской программе. Для этого печатная форма подается на вход метода :doc:`http/Recognize` в формате :`XPS <https://msdn.microsoft.com/en-us/library/windows/hardware/dn641615(v=vs.85).aspx>`__.

В случае успешного распознавания на выходе метода :doc:`http/GetRecognized` получается XML-файл счета-фактуры в формате, удовлетворяющем требованиям ФНС и пригодном для отправки в соответствии с порядком, утвержденным Минфином.

Фильтрация списка документов
----------------------------

При помощи метода :doc:`http/GetDocuments`, можно быстро получать информацию о документах (например, о счетах-фактурах) в своем ящике, задавая различные критерии фильтрации документов.

Например, можно запросить список всех входящих счетов-фактур от заданного контрагента за определенный период. В ряде сценариев этот метод может оказаться более удобным по сравнению с механизмом получения новостей методами :doc:`http/GetNewEvents`, :doc:`http/GetEvent` и :doc:`http/GetMessage`.

Кроме того, есть возможность получить всю метаинформацию об отдельном документе, зная его идентификатор. Для этого предназначен метод :doc:`http/GetDocument`.

