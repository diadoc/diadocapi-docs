Лента событий по контрагентам
=============================

.. contents:: :local:

Диадок предоставляет возможность отслеживать события, произошедшие с контрагентами. С помощью этих событий вы можете получать информацию об изменениях, произошедших в отношениях с контрагентом.

Для получения событий по контрагентам используйте метод :doc:`../http/GetCounteragentEvents`. Он вернет в ответе структуру :doc:`../proto/BoxCounteragentEventList`, содержащую информацию о контрагенте, с которым произошло событие, и о самом событии.

Метод возвращает только некоторые типы событий, они указаны в перечислении :doc:`EventTypes <../proto/BoxCounteragentEventList>`.

**Пример HTTP-запроса метода GetCounteragentEvents:**

.. literalinclude:: ../include/getCounteragentEvents_query.txt

**Пример тела ответа метода GetCounteragentEvents:**

.. container:: toggle

	.. literalinclude:: ../include/getCounteragentEvents_resp.txt
		:language: json

В указанном выше примере произошло два события:

	#. Событие с идентификатором ``765de718-442e-11ef-8007-828b06413688``:

		- произошло с контрагентом ``09ae254c-5cd0-4082-84de-7ccb46d86f82``. Из блока ``Counteragent``, помимо идентификатора ящика контрагента, можно получить следующую информацию:

			- текущий статус отношений с контрагентом после возникновения события: ``IsRejectedByMe`` — контрагент был удален мной из списка контрагентов;
			- время возникновения события;
			- комментарии по событию.

		- тип произошедшего события: ``EventTypes = IBrokeUpWithCounteragent`` — я разорвал отношения с контрагентом.

	#. Событие с идентификатором ``7c313a39-442e-11ef-8010-9fb6f747d48a``:

		- произошло с контрагентом ``09ae254c-5cd0-4082-84de-7ccb46d86f82``. Из блока ``Counteragent``, помимо идентификатора ящика контрагента, можно получить следующую информацию:

			- текущий статус отношений с контрагентом после возникновения события: ``IsInvitedByMe`` — контрагент приглашен мной;
			- время возникновения события,
			- комментариев по событию нет.

		- тип произошедшего события: ``EventTypes = IInvitedCounteragent`` — я отправил контрагенту приглашение.

Из этого примера можно получить информацию о том, что контрагент ``09ae254c-5cd0-4082-84de-7ccb46d86f82`` сначала был удален из списка контрагентов, а затем вновь приглашен.


----

.. rubric:: См. также

*Определение:*
	- :doc:`../entities/counteragent`

.. include:: ../include/seealso_instr_counteragentevent.txt